<h2 mat-dialog-title>
    <fa-icon [icon]="faPlusCircle"></fa-icon>
    {{ 'CV.COURSES.COURSES' | translate }}
</h2>
<hr>
<div mat-dialog-content>
    <div *ngIf="errors">
        <div class="alert alert-danger" *ngFor="let error of errors">{{error}}</div>
    </div>
    <form [formGroup]="form" #f="ngForm" (ngSubmit)="onSubmit()">
        <div class="row">
            <div class="col-md-10">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.NAME' | translate }} *</mat-label>
                    <input type="text" matInput formControlName="name">
                    <mat-error *ngIf="!form.controls.name.valid && form.controls.name.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field>
                    <mat-label translate>COMMON.LANGUAGE</mat-label>
                    <mat-select formControlName="currentLang" (ngModelChange)="onChangeLang()">
                        <mat-option *ngFor="let lang of languages" [value]="lang">
                            {{lang}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-12">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.URL' | translate }} *</mat-label>
                    <input type="text" matInput formControlName="courseUrl">
                    <mat-error *ngIf="!form.controls.courseUrl.valid && form.controls.courseUrl.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.TYPE' | translate }} *</mat-label>
                    <input type="text" matInput formControlName="type">
                    <mat-error *ngIf="!form.controls.type.valid && form.controls.type.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.ESTABLISHMENT' | translate }} *</mat-label>
                    <input type="text" matInput formControlName="establishment">
                    <mat-error *ngIf="!form.controls.establishment.valid && form.controls.establishment.touched"
                        translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.DURATION' | translate }} *</mat-label>
                    <input type="text" matInput formControlName="duration">
                    <mat-error *ngIf="!form.controls.duration.valid && form.controls.duration.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.COURSES.DATETIME' | translate }} *</mat-label>
                    <input type="date" matInput formControlName="dateTime">
                    <mat-error *ngIf="!form.controls.dateTime.valid && form.controls.dateTime.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="currentLang === 'en'">
                    <mat-label>{{ 'CV.COURSES.COUNTRY' | translate }} (en)</mat-label>
                    <input type="text" matInput formControlName="country_EN">
                    <mat-error *ngIf="!form.controls.country_EN.valid && form.controls.country_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="currentLang === 'fr'">
                    <mat-label>{{ 'CV.COURSES.COUNTRY' | translate }} (fr)</mat-label>
                    <input type="text" matInput formControlName="country_FR">
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="currentLang === 'en'">
                    <mat-label>{{ 'CV.COURSES.CITY' | translate }} (en)</mat-label>
                    <input type="text" matInput formControlName="city_EN">
                    <mat-error *ngIf="!form.controls.city_EN.valid && form.controls.city_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="currentLang === 'fr'">
                    <mat-label>{{ 'CV.COURSES.CITY' | translate }} (fr)</mat-label>
                    <input type="text" matInput formControlName="city_FR">
                </mat-form-field>
            </div>
        </div>
    </form>

</div>
<div mat-dialog-actions class="float-right mt-3">
    <button mat-raised-button color="warn" (click)="onNoClick()"
        *ngIf="!creating">{{ 'COMMON.CANCEL' | translate }}</button>
    <button mat-raised-button color="primary" [disabled]="!form.valid" *ngIf="!creating"
        (click)="f.onSubmit(undefined)">{{ 'COMMON.SAVE' | translate }}</button>
    <mat-spinner diameter="30" color="accent" *ngIf="creating"></mat-spinner>
</div>