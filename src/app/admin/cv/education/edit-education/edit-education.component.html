<div class="adminPageTop">
    <div class="row">
        <div class="col-md-6">
            <h1>
                <fa-icon [icon]="faPlusCircle"></fa-icon>
                {{ 'CV.EDUCATION.EDUCATION' | translate }}
            </h1>
        </div>
        <div class="col-lg-2">
            <mat-form-field appearance="legacy">
                <mat-label translate>COMMON.LANGUAGE</mat-label>
                <mat-select [(ngModel)]="editLang">
                    <mat-option *ngFor="let lang of languages" [value]="lang">
                        {{lang}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-md-2">
            <button type="button" mat-raised-button color="accent" class="btn-block mt-1" (click)="onCancel();">
                {{ 'COMMON.CANCEL' | translate }}
            </button>
        </div>
        <div class="col-md-2">
            <button mat-raised-button color="primary" class="btn-block mt-1" *ngIf="!loading && !creating && !updating"
                [disabled]="!form.valid || loading || creating || updating" (click)="f.onSubmit(undefined)">
                {{ 'COMMON.SAVE' | translate }}
            </button>

            <mat-spinner diameter="40" *ngIf="loading || creating || updating"></mat-spinner>
        </div>
    </div>

    <hr>
</div>

<div class="adminPageBottom">
    <div *ngIf="errors">
        <div class="alert alert-danger" *ngFor="let error of errors">{{error}}</div>
    </div>

    <form [formGroup]="form" #f="ngForm" (ngSubmit)="onSubmit()">
        <div class="row mt-3">
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.TITLE' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="title_EN">
                    <mat-error *ngIf="!form.controls.title_EN.valid && form.controls.title_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.TITLE' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="title_FR">
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.SPECIALIZATION' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="specialization_EN">
                    <mat-error *ngIf="!form.controls.specialization_EN.valid && form.controls.specialization_EN.touched"
                        translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.SPECIALIZATION' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="specialization_FR">
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.ESTABLISHMENT' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="establishment_EN">
                    <mat-error *ngIf="!form.controls.establishment_EN.valid && form.controls.establishment_EN.touched"
                        translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.ESTABLISHMENT' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="establishment_FR">
                </mat-form-field>
            </div>

            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.COUNTRY' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="country_EN">
                    <mat-error *ngIf="!form.controls.country_EN.valid && form.controls.country_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.COUNTRY' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="country_FR">
                </mat-form-field>
            </div>

            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.CITY' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="city_EN">
                    <mat-error *ngIf="!form.controls.city_EN.valid && form.controls.city_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.CITY' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="city_FR">
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.EDUCATION.YEARS_COUNT' | translate }} *</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="yearsCount">
                    <mat-error *ngIf="!form.controls.yearsCount.valid && form.controls.yearsCount.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'en'">
                    <mat-label>{{ 'CV.EDUCATION.MENTION' | translate }} (en)*</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="mention_EN">
                    <mat-error *ngIf="!form.controls.mention_EN.valid && form.controls.mention_EN.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="legacy" *ngIf="editLang === 'fr'">
                    <mat-label>{{ 'CV.EDUCATION.MENTION' | translate }} (fr)</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="mention_FR">
                </mat-form-field>
            </div>

            <div class="col-md-4">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.EDUCATION.NOTE' | translate }} *</mat-label>
                    <input [readonly]="loading" type="text" matInput formControlName="note">
                    <mat-error *ngIf="!form.controls.note.valid && form.controls.note.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.EDUCATION.START_DATE' | translate }} *</mat-label>
                    <input [readonly]="loading" type="date" matInput formControlName="startDate">
                    <mat-error *ngIf="!form.controls.startDate.valid && form.controls.startDate.touched" translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="full-width" appearance="legacy">
                    <mat-label>{{ 'CV.EDUCATION.GRADUATE_DATE' | translate }} *</mat-label>
                    <input [readonly]="loading" type="date" matInput formControlName="graduateDate">
                    <mat-error *ngIf="!form.controls.graduateDate.valid && form.controls.graduateDate.touched"
                        translate>
                        VALIDATION.REQUIRED
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

    </form>
</div>